(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-217a1d94"],{"16cb":function(e,t,r){},c1dfc:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"page-title"},[r("h3",[e._v("Планирование")]),r("h4",[e._v(e._s(e._f("currencyFilter")(e.info.bill,"RUB")))])]),e.loading?r("loader"):e.categories.length?r("section",e._l(e.categories,(function(t){return r("div",{key:t.id},[r("p",[r("strong",[e._v(" "+e._s(t.title)+": ")]),e._v(" "+e._s(e._f("currencyFilter")(t.spend,"RUB"))+" из "+e._s(e._f("currencyFilter")(t.limit,"RUB"))+" ")]),r("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltip,expression:"cat.tooltip"}],staticClass:"progress"},[r("div",{staticClass:"determinate",class:[t.progressColor],style:{width:t.progressPercent+"%"}})])])})),0):r("p",[e._v(" Категорий пока нет. "),r("router-link",{attrs:{to:"/categories"}},[e._v(" Добавить новую категорию. ")])],1)],1)},c=[],i=r("1da1"),o=r("5530"),a=(r("96cf"),r("99af"),r("d81d"),r("d3b7"),r("4de4"),function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lds-ring"},[r("div"),r("div"),r("div"),r("div")])}],l=(r("e1f6"),r("2877")),u={},d=Object(l["a"])(u,a,s,!1,null,null,null),f=d.exports,p=r("2f62"),v=r("75fc"),g={name:"Planing",metaInfo:function(){return{title:this.$title("Menu_Planning")}},components:{Loader:f},data:function(){return{categories:[],loading:!0,records:[]}},computed:Object(o["a"])({},Object(p["c"])(["info"])),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchCategories");case 2:r=t.sent,n=0;case 4:if(!(n<r.length)){t.next=13;break}return c=r[n].id,t.next=8,e.$store.dispatch("fetchRecords",c);case 8:i=t.sent,e.records=e.records.concat(i);case 10:n++,t.next=4;break;case 13:e.categories=r.map((function(t){var r=e.records.filter((function(e){return e.categoryId===t.id})).filter((function(e){return"outcome"===e.type})).reduce((function(e,t){return e+=t.amount,e}),0),n=100*r/t.limit,c=n>100?100:n,i=n<60?"green":n<100?"yellow":"red",a=t.limit-r,s="".concat(a<0?"Превышение на":"Осталось"," ").concat(Object(v["a"])(Math.abs(a)));return Object(o["a"])(Object(o["a"])({},t),{},{progressPercent:c,progressColor:i,spend:r,tooltip:s})})),e.loading=!1;case 15:case"end":return t.stop()}}),t)})))()}},m=g,_=Object(l["a"])(m,n,c,!1,null,null,null);t["default"]=_.exports},d81d:function(e,t,r){"use strict";var n=r("23e7"),c=r("b727").map,i=r("1dde"),o=i("map");n({target:"Array",proto:!0,forced:!o},{map:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})},e1f6:function(e,t,r){"use strict";r("16cb")}}]);
//# sourceMappingURL=chunk-217a1d94.ee821fdb.js.map